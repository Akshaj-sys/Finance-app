<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Finance Tracker</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
</head>
<body>

    <header>
        <h1>Finance Tracker</h1>
        <div id="net-worth-display">Net Worth: $0.00</div>
    </header>

    <nav>
        <button onclick="showSection('dashboard')" class="active">Dashboard</button>
        <button onclick="showSection('expenses')">Expenses</button>
        <button onclick="showSection('assets')">Assets</button>
        <button onclick="showSection('liabilities')">Liabilities</button>
        <button onclick="showSection('data')">Data</button>
    </nav>

    <main>
        <section id="dashboard" class="active-section">
            <div class="summary-cards">
                <div class="card">
                    <h3>Total Assets</h3>
                    <p id="total-assets">$0.00</p>
                </div>
                <div class="card">
                    <h3>Total Liabilities</h3>
                    <p id="total-liabilities">$0.00</p>
                </div>
                <div class="card">
                    <h3>Monthly Expenses</h3>
                    <p id="total-expenses">$0.00</p>
                </div>
            </div>
        </section>

        <section id="expenses" class="hidden">
            <h2>Expenses</h2>
            <form id="expense-form">
                <input type="date" id="exp-date" required>
                <select id="exp-category">
                    <option value="Food">Food</option>
                    <option value="Transport">Transport</option>
                    <option value="Utilities">Utilities</option>
                    <option value="Entertainment">Entertainment</option>
                    <option value="Healthcare">Healthcare</option>
                    <option value="Groceries">Groceries</option>
                    <option value="Shopping">Shopping</option>
                    <option value="Rent">Rent</option>
                    <option value="Others">Others</option>
                </select>
                <input type="number" id="exp-amount" placeholder="Amount" step="0.01" required>
                <input type="text" id="exp-note" placeholder="Note (Optional)">
                <button type="submit">Add Expense</button>
            </form>
            <div class="list-container" id="expense-list"></div>
        </section>

        <section id="assets" class="hidden">
            <h2>Assets</h2>
            <form id="asset-form">
                <input type="text" id="asset-name" placeholder="Asset Name" required>
                <select id="asset-type">
                    <option value="Savings">Savings</option>
                    <option value="Investment">Investment</option>
                    <option value="Insurance">Insurance</option>
                    <option value="Property">Property</option>
                    <option value="Others">Others</option>
                </select>
                <input type="number" id="asset-value" placeholder="Value" step="0.01" required>
                <button type="submit">Add Asset</button>
            </form>
            <div class="list-container" id="asset-list"></div>
        </section>

        <section id="liabilities" class="hidden">
            <h2>Liabilities</h2>
            <form id="liability-form">
                <input type="text" id="lia-name" placeholder="Liability Name" required>
                <select id="lia-type">
                    <option value="Credit Card">Credit Card</option>
                    <option value="Loan">Loan</option>
                    <option value="Mortgage">Mortgage</option>
                    <option value="Vehicle">Vehicle</option>
                    <option value="Luxury">Luxury</option>
                    <option value="Others">Others</option>
                </select>
                <input type="number" id="lia-amount" placeholder="Amount" step="0.01" required>
                <button type="submit">Add Liability</button>
            </form>
            <div class="list-container" id="liability-list"></div>
        </section>

        <section id="data" class="hidden">
            <h2>Data Management</h2>
            <p>Your data is stored only in this browser.</p>
            
            <div class="data-group">
                <h3>Export Data (Download CSV)</h3>
                <button onclick="exportCSV('expenses')">Export Expenses.csv</button>
                <button onclick="exportCSV('assets')">Export Assets.csv</button>
                <button onclick="exportCSV('liabilities')">Export Liabilities.csv</button>
            </div>

            <div class="data-group">
                <h3>Import Data (Upload CSV)</h3>
                <label>Import Expenses:</label>
                <input type="file" accept=".csv" onchange="importCSV(this, 'expenses')">
                <br>
                <label>Import Assets:</label>
                <input type="file" accept=".csv" onchange="importCSV(this, 'assets')">
                <br>
                <label>Import Liabilities:</label>
                <input type="file" accept=".csv" onchange="importCSV(this, 'liabilities')">
            </div>
            
            <div class="data-group danger-zone">
                <h3>Danger Zone</h3>
                <button onclick="clearAllData()" style="background-color: #c0392b;">Wipe All Data</button>
            </div>
        </section>
    </main>

    <script src="app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(() => console.log('Service Worker Registered'));
        }
    </script>
</body>
</html>
